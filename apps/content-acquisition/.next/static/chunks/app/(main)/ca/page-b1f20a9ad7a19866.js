(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[640],{4283:(e,t,a)=>{"use strict";a.d(t,{FF:()=>i,vP:()=>l,yJ:()=>r});let r={M1:"V1",M2:"V2"},i={HEADER:"px-4 py-2 bg-gray-100 font-medium text-sm",CONTENT:"px-4 py-2 text-sm break-all pr-2",CONTENT_NO_BREAK:"px-4 py-2 text-sm"},l={UNIQUE_ID_PREFIX:"file-uid-",DEFAULT_FILE_PATH:"-"}},4727:(e,t,a)=>{"use strict";a.d(t,{O:()=>n,cn:()=>s});var r=a(9975),i=a(2171),l=a(4283);function s(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,i.QP)((0,r.$)(t))}function n(e){return"".concat(l.vP.UNIQUE_ID_PREFIX).concat(e,"-").concat(Date.now())}},5355:(e,t,a)=>{Promise.resolve().then(a.bind(a,9005))},6468:(e,t,a)=>{"use strict";a.d(t,{A0:()=>n,BF:()=>o,Hj:()=>d,XI:()=>s,nA:()=>f,nd:()=>c});var r=a(8861),i=a(3705),l=a(4727);let s=i.forwardRef((e,t)=>{let{className:a,...i}=e;return(0,r.jsx)("div",{className:"relative w-full overflow-auto",children:(0,r.jsx)("table",{ref:t,className:(0,l.cn)("w-full caption-bottom text-sm",a),...i})})});s.displayName="Table";let n=i.forwardRef((e,t)=>{let{className:a,...i}=e;return(0,r.jsx)("thead",{ref:t,className:(0,l.cn)("[&_tr]:border-b",a),...i})});n.displayName="TableHeader";let o=i.forwardRef((e,t)=>{let{className:a,...i}=e;return(0,r.jsx)("tbody",{ref:t,className:(0,l.cn)("[&_tr:last-child]:border-0",a),...i})});o.displayName="TableBody",i.forwardRef((e,t)=>{let{className:a,...i}=e;return(0,r.jsx)("tfoot",{ref:t,className:(0,l.cn)("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",a),...i})}).displayName="TableFooter";let d=i.forwardRef((e,t)=>{let{className:a,...i}=e;return(0,r.jsx)("tr",{ref:t,className:(0,l.cn)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",a),...i})});d.displayName="TableRow";let c=i.forwardRef((e,t)=>{let{className:a,...i}=e;return(0,r.jsx)("th",{ref:t,className:(0,l.cn)("h-10 px-2 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",a),...i})});c.displayName="TableHead";let f=i.forwardRef((e,t)=>{let{className:a,...i}=e;return(0,r.jsx)("td",{ref:t,className:(0,l.cn)("p-2 align-middle [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",a),...i})});f.displayName="TableCell",i.forwardRef((e,t)=>{let{className:a,...i}=e;return(0,r.jsx)("caption",{ref:t,className:(0,l.cn)("mt-4 text-sm text-muted-foreground",a),...i})}).displayName="TableCaption"},9005:(e,t,a)=>{"use strict";a.d(t,{default:()=>U});var r=a(8861),i=a(4727);function l(e){let{children:t,className:a=""}=e;return(0,r.jsx)("div",{className:(0,i.cn)("max-w-full bg-white rounded-3xl ring-1 ring-gray-200 shadow-md py-5 flex flex-col space-y-2 px-4",a),children:t})}var s=a(2495),n=a(3839),o=a(3705);let d=(0,n.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-[#2B76E5] text-white font-[16.16px] shadow hover:bg-[#2B76E5]/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),c=o.forwardRef((e,t)=>{let{className:a,variant:l,size:n,asChild:o=!1,...c}=e,f=o?s.DX:"button";return(0,r.jsx)(f,{className:(0,i.cn)(d({variant:l,size:n,className:a})),ref:t,...c})});c.displayName="Button";let f=o.forwardRef((e,t)=>{let{className:a,type:l,...s}=e;return(0,r.jsx)("input",{type:l,className:(0,i.cn)("flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-base shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",a),ref:t,...s})});f.displayName="Input";let u=[{id:"4",title:"ACT Accelerator Strategic Plan & Budget",filename:"ACT_accelerator_Strategic_Plan_&_Budget.pdf",path:"/pdfs/ACT_accelerator_Strategic_Plan_&_Budget.pdf",size:"4.2 MB",type:"pdf",createdAt:new Date("2025-04-01"),isActive:!0,createdBy:"health@example.com",updatedAt:new Date("2025-04-05")},{id:"5",title:"Better Cardiac Care Aboriginal Torres Strait Islander 2021",filename:"Better_Cardiac_Care_Aboriginal_Torres_Strait_Islander_2021.pdf",path:"/pdfs/Better_Cardiac_Care_Aboriginal_Torres_Strait_Islander_2021.pdf",size:"3.7 MB",type:"pdf",createdAt:new Date("2025-02-15"),isActive:!0,createdBy:"research@example.com",updatedAt:new Date("2025-03-20")},{id:"6",title:"Child Protection Australia 2021-22",filename:"Child_Protection_Australia_2021_22.pdf",path:"/pdfs/Child_Protection_Australia_2021_22.pdf",size:"2.9 MB",type:"pdf",createdAt:new Date("2025-01-28"),isActive:!0,createdBy:"welfare@example.com",updatedAt:new Date("2025-02-10")},{id:"7",title:"OECD Health Care Quality and Outcomes Indicators",filename:"OECD_health_care_quality_and_outcomes_indicators.pdf",path:"/pdfs/OECD_health_care_quality_and_outcomes_indicators.pdf",size:"5.1 MB",type:"pdf",createdAt:new Date("2025-03-25"),isActive:!0,createdBy:"policy@example.com",updatedAt:new Date("2025-04-12")},{id:"8",title:"Oxygen Therapy Equipment Cleaning Guidelines",filename:"Oxygen_Therapy_Equipment_Cleaning_Guidelines.pdf",path:"/pdfs/Oxygen_Therapy_Equipment_Cleaning_Guidelines.pdf",size:"1.8 MB",type:"pdf",createdAt:new Date("2025-02-05"),isActive:!0,createdBy:"medical@example.com",updatedAt:new Date("2025-03-01")}];var p=a(2338),m=a(4319),h=a(6468);function g(e){var t;let{data:a,columns:i}=e,[l,s]=(0,o.useState)([]),[n,d]=(0,o.useState)([]),[c,f]=(0,o.useState)({}),[u,g]=(0,o.useState)({}),x=(0,p.N4)({data:a,columns:i,onSortingChange:s,onColumnFiltersChange:d,getCoreRowModel:(0,m.HT)(),getPaginationRowModel:(0,m.kW)(),getSortedRowModel:(0,m.h5)(),getFilteredRowModel:(0,m.hM)(),onColumnVisibilityChange:f,onRowSelectionChange:g,enableMultiRowSelection:!1,enableRowSelection:!0,state:{sorting:l,columnFilters:n,columnVisibility:c,rowSelection:u}});return(0,r.jsx)("div",{className:"w-full",children:(0,r.jsx)("div",{className:" border",children:(0,r.jsxs)(h.XI,{children:[(0,r.jsx)(h.A0,{children:x.getHeaderGroups().map(e=>(0,r.jsx)(h.Hj,{children:e.headers.map(e=>(0,r.jsx)(h.nd,{className:"px-2",children:e.isPlaceholder?null:(0,p.Kv)(e.column.columnDef.header,e.getContext())},e.id))},e.id))}),(0,r.jsx)(h.BF,{children:(null==(t=x.getRowModel().rows)?void 0:t.length)?x.getRowModel().rows.map(e=>(0,r.jsx)(h.Hj,{"data-state":e.getIsSelected()&&"selected",children:e.getVisibleCells().map(e=>(0,r.jsx)(h.nA,{children:(0,p.Kv)(e.column.columnDef.cell,e.getContext())},e.id))},e.id)):(0,r.jsx)(h.Hj,{children:(0,r.jsx)(h.nA,{colSpan:i.length,className:"h-24 text-center",children:"No results."})})})]})})})}var x=a(8667),_=a(6201);function w(e){let t=window.location.pathname.startsWith("/app1")?"/app1":"",a=e.startsWith("/")?e:"/".concat(e);return"".concat(t).concat(a)}let b=async e=>{let{body:t}=e;if(!(await fetch(w("/api/pdfs"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...t})})).ok)throw Error("Failed to register file via table row");return"File registered successfully"},j=async e=>{let t=await fetch(w("/api/register-job-batch-file"),{method:"POST",body:e});if(!t.ok)throw Error("Failed to upload file");return t},y=async e=>{let t=await fetch(w("/api/register-job-batch-file"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok)throw Error("Failed to fetch roles");return t},v=e=>{let{className:t,variant:a="white"}=e;return(0,r.jsxs)("div",{className:(0,i.cn)("flex items-center justify-center space-x-2",t),children:[(0,r.jsx)("div",{className:"w-1.5 h-1.5 bg-".concat(a," rounded-full animate-bounce [animation-delay:-0.3s]")}),(0,r.jsx)("div",{className:"w-1.5 h-1.5 bg-".concat(a," rounded-full animate-bounce [animation-delay:-0.15s]")}),(0,r.jsx)("div",{className:"w-1.5 h-1.5 bg-".concat(a," rounded-full animate-bounce")})]})};var N=a(4283),A=a(8915),k=a(1006),C=a(3843),S=a(8919),T=a(2429),E=a(5277);let F=e=>{let{pdf:t}=e,[a,l]=(0,o.useState)(!1),[s,n]=(0,o.useState)(!1),d=(0,S.useSearchParams)(),f=d.get("project_id")||"",u=d.get("project_code")||"",p=d.get("workflow_id")||"",m=d.get("workflow_code")||"",h=d.get("task_id")||"",g=d.get("task_uid")||"",x=d.get("user_id")||"";(0,o.useEffect)(()=>{},[f,u,p,m,h,g,x]);let _={project_code:u||E.env.NEXT_PUBLIC_PROJECT_CODE||"",workflow_code:m||E.env.NEXT_PUBLIC_WORKFLOW_CODE||"",first_task_uid:g||E.env.NEXT_PUBLIC_FIRST_TASK_UID||"",file_unique_identifier:"",file_name:"",file_path:N.vP.DEFAULT_FILE_PATH,project_id:f||"",workflow_id:p||"",meta_data:{...N.yJ}},w=async()=>{n(!0);try{let e={..._,file_name:t.filename,file_unique_identifier:(0,i.O)(t.filename),file_path:t.path,meta_data:{...N.yJ}},a=[{field:"project_code",label:"Project Code"},{field:"workflow_code",label:"Workflow Code"},{field:"first_task_uid",label:"Content Acquisition Task UID"}].find(t=>{let{field:a}=t;return!e[a]||"string"==typeof e[a]&&""===e[a].trim()});if(a){T.o.error("".concat(a.label," is required. Please fill it out before proceeding.")),n(!1);return}if(!e.file_name||""===e.file_name.trim()){T.o.error("File name cannot be empty"),n(!1);return}if(!e.file_path||""===e.file_path.trim()){T.o.error("File path cannot be empty"),n(!1);return}await b({body:e}),T.o.success("PDF registered successfully")}catch(e){T.o.error("Failed to register PDF")}finally{n(!1),l(!1)}},j=(0,S.useRouter)();return(0,r.jsxs)("div",{className:"flex space-x-2 ",children:[(0,r.jsx)(c,{variant:"ghost",size:"icon",onClick:()=>{var e;let a=new URLSearchParams({id:t.id,title:t.title,fileName:t.filename,path:t.path,size:(null!=(e=t.size)?e:0).toString(),type:t.type,createdAt:String(t.createdAt),isActive:t.isActive?"true":"false",createdBy:String(t.createdBy),updatedAt:String(t.updatedAt)});j.push("/pdf?".concat(a.toString()))},title:"View PDF",className:"cursor-pointer",children:(0,r.jsx)(k.A,{className:"h-4 w-4"})}),(0,r.jsxs)(A.AM,{open:a,onOpenChange:l,children:[(0,r.jsx)(A.Wv,{onClick:()=>l(!a),className:"cursor-pointer hover:bg-accent hover:text-accent-foreground h-9 px-4 py-2",children:(0,r.jsx)(C.A,{className:"h-4 w-4"})}),(0,r.jsxs)(A.hl,{className:" p-4 w-fit border-2 *:border-gray-300 bg-white flex flex-col items-center gap-2 rounded-md ",children:[(0,r.jsx)("p",{children:"Do you want to register this file ?"}),(0,r.jsxs)("div",{className:"flex flex-row gap-2",children:[(0,r.jsx)(c,{size:"icon",className:"cursor-pointer w-fit p-4",onClick:w,title:"Register file",disabled:s,children:s?(0,r.jsx)(v,{variant:"white"}):"Yes, register it."}),(0,r.jsx)(A.iN,{asChild:!0,children:(0,r.jsx)(c,{size:"icon",className:"cursor-pointer w-fit p-4 bg-red-600 hover:bg-red-200 ",title:"Close popover",children:"No"})})]})]})]})]})},P=[{accessorKey:"title",header:e=>{let{column:t}=e;return(0,r.jsxs)(c,{variant:"ghost",onClick:()=>t.toggleSorting("asc"===t.getIsSorted()),className:"  text-black font-league font-[400] text-sm tracking-wide cursor-pointer",children:["Title",(0,r.jsx)(x.A,{className:"ml-2 h-4 w-4"})]})},cell:e=>{let{row:t}=e;return(0,r.jsxs)("div",{className:"flex flex-row items-center gap-2",children:[(0,r.jsx)(_.A,{className:"h-4 w-4 my-auto"}),(0,r.jsx)("div",{className:"font-medium",children:t.getValue("title")})]})}},{accessorKey:"filename",header:e=>{let{column:t}=e;return(0,r.jsxs)(c,{variant:"ghost",onClick:()=>t.toggleSorting("asc"===t.getIsSorted()),className:"  text-black font-league font-[400] text-sm tracking-wide cursor-pointer",children:["Filename",(0,r.jsx)(x.A,{className:"ml-2 h-4 w-4"})]})},cell:e=>{let{row:t}=e;return(0,r.jsx)("span",{children:t.getValue("filename")})}},{accessorKey:"type",header:e=>{let{column:t}=e;return(0,r.jsxs)(c,{variant:"ghost",onClick:()=>t.toggleSorting("asc"===t.getIsSorted()),className:"  text-black font-league font-[400] text-sm tracking-wide cursor-pointer",children:["Type",(0,r.jsx)(x.A,{className:"ml-2 h-4 w-4"})]})},cell:e=>{let{row:t}=e;return(0,r.jsx)("span",{children:t.getValue("type").toUpperCase()})}},{accessorKey:"createdAt",header:e=>{let{column:t}=e;return(0,r.jsxs)(c,{variant:"ghost",onClick:()=>t.toggleSorting("asc"===t.getIsSorted()),className:"  text-black font-league font-[400] text-sm tracking-wide cursor-pointer",children:["Date Added",(0,r.jsx)(x.A,{className:"ml-2 h-4 w-4"})]})},cell:e=>{let{row:t}=e,a=t.original.createdAt;return a?(0,r.jsx)("span",{children:a.toLocaleDateString()}):(0,r.jsx)("span",{children:"Not Available"})}},{id:"actions",header:"Actions",cell:e=>{let{row:t}=e,a=t.original;return(0,r.jsx)("div",{className:"flex space-x-2",children:(0,r.jsx)(F,{pdf:a})})}}];function D(e){let{documents:t}=e;return(0,r.jsx)("div",{children:(0,r.jsx)(g,{data:t,columns:P})})}var R=a(938);function O(e){let{delayDuration:t=0,...a}=e;return(0,r.jsx)(R.Kq,{"data-slot":"tooltip-provider",delayDuration:t,...a})}function B(e){let{...t}=e;return(0,r.jsx)(O,{children:(0,r.jsx)(R.bL,{"data-slot":"tooltip",...t})})}function I(e){let{...t}=e;return(0,r.jsx)(R.l9,{"data-slot":"tooltip-trigger",...t})}function q(e){let{className:t,sideOffset:a=0,children:l,...s}=e;return(0,r.jsx)(R.ZL,{children:(0,r.jsxs)(R.UC,{"data-slot":"tooltip-content",sideOffset:a,className:(0,i.cn)("bg-primary text-primary-foreground animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 w-fit origin-(--radix-tooltip-content-transform-origin) rounded-md px-3 py-1.5 text-xs text-balance",t),...s,children:[l,(0,r.jsx)(R.i3,{className:"bg-primary fill-primary z-50 size-2.5 translate-y-[calc(-50%_-_2px)] rotate-45 rounded-[2px]"})]})})}var z=a(4420);function M(){let e=(0,o.useMemo)(()=>N.yJ,[]),t=(0,S.useSearchParams)(),a=t.get("project_id")||"",l=t.get("project_code")||"",s=t.get("workflow_id")||"",n=t.get("workflow_code")||"",d=t.get("task_uid")||"",f=(0,o.useMemo)(()=>({project_code:l,workflow_code:n,first_task_uid:d,file_unique_identifier:"",file_name:"",file_path:N.vP.DEFAULT_FILE_PATH,project_id:a||"",workflow_id:s||"",meta_data:{...e}}),[l,n,d,a,s,e]),[u,p]=(0,o.useState)(!1),m=(0,o.useRef)(null),h=async e=>{if(!e.target.files||0===e.target.files.length)return;let t=e.target.files[0],a={...f,file_name:t.name,file_unique_identifier:(0,i.O)(t.name)};p(!0);try{let e,r;if(t){let r=new FormData;r.append("file",t),r.append("project_code",a.project_code),r.append("workflow_code",a.workflow_code),r.append("first_task_uid",a.first_task_uid),r.append("project_id",a.project_id),r.append("workflow_id",a.workflow_id),a.file_unique_identifier&&r.append("file_unique_identifier",a.file_unique_identifier),r.append("meta_data",JSON.stringify(a.meta_data||N.yJ)),e=await j(r)}else{let t={project_code:a.project_code,workflow_code:a.workflow_code,first_task_uid:a.first_task_uid,file_name:a.file_name,file_unique_identifier:a.file_unique_identifier||(0,i.O)(a.file_name),file_path:a.file_path||N.vP.DEFAULT_FILE_PATH,project_id:a.project_id||"",workflow_id:a.workflow_id||"",meta_data:a.meta_data||N.yJ};e=await y(t)}try{r=await e.json()}catch(a){let t=await e.text();throw Error("Non-JSON response received: ".concat(t.substring(0,100),"..."))}if(!e.ok)throw Error(r.error||"Failed to register job batch file (".concat(e.status,")"));r&&((null==r?void 0:r.file_output_upload_url)||(null==r?void 0:r.registration)&&(null==r?void 0:r.registration.file_output_upload_url))&&T.o.success("File successfully registered!")}catch(t){let e=t instanceof Error?t.message:"An error occurred";T.o.error("Failed to register job batch file: ".concat(e))}finally{p(!1)}};return(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("input",{id:"file_upload",ref:m,type:"file",onChange:h,className:"sr-only"}),(0,r.jsx)(O,{children:(0,r.jsxs)(B,{children:[(0,r.jsx)(I,{asChild:!0,children:(0,r.jsxs)(c,{variant:"ghost",className:"relative cursor-pointer shadow-md ring-1  ring-gray-200 hover:bg-gray-100 ",onClick:()=>{var e;null==(e=m.current)||e.click()},disabled:u,children:[(0,r.jsx)(z.A,{}),u?(0,r.jsxs)(r.Fragment,{children:["Registering ",(0,r.jsx)(v,{variant:"black"})]}):"Register Uploaded File"]})}),(0,r.jsx)(q,{className:"max-w-xs",children:(0,r.jsx)("p",{children:"Choose another file to upload and register (This will not upload your file in your preferred storage)"})})]})})]})}function U(){return(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)(l,{children:[(0,r.jsxs)("div",{className:"flex px-5 mb-5 justify-between items-center ",children:[(0,r.jsx)("h1",{className:"text-xl  font-normal font-league",children:"Content Acquisition"}),(0,r.jsx)("div",{className:"flex gap-2",children:(0,r.jsx)(M,{})})]}),(0,r.jsx)(D,{documents:u}),(0,r.jsxs)("div",{className:"flex px-5 pt-3 justify-between items-center ",children:[(0,r.jsxs)("p",{className:"text-normal font-light",children:["Showing ",u.length," of ",u.length," entries"]}),(0,r.jsxs)("div",{className:"flex items-center gap-1",children:[(0,r.jsx)(c,{variant:"ghost",className:"cursor-pointer",disabled:!0,children:"Previous"}),(0,r.jsx)(c,{variant:"ghost",className:"cursor-pointer",disabled:!0,children:"Next"}),(0,r.jsx)("p",{className:"pl-6  text-gray-500 text-sm",children:"Show:"}),(0,r.jsx)(f,{type:"number",defaultValue:10,className:"w-16",min:1,max:100,disabled:!0})]})]})]})})}}},e=>{var t=t=>e(e.s=t);e.O(0,[115,429,719,780,806,358],()=>t(5355)),_N_E=e.O()}]);