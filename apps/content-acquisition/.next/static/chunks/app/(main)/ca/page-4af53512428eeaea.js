(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[640],{1672:(e,t,r)=>{"use strict";r.d(t,{$:()=>d});var a=r(8861),i=r(2495),l=r(3839),s=r(3705),n=r(4727);let o=(0,l.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-[#2B76E5] text-white font-[16.16px] shadow hover:bg-[#2B76E5]/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),d=s.forwardRef((e,t)=>{let{className:r,variant:l,size:s,asChild:d=!1,...c}=e,f=d?i.DX:"button";return(0,a.jsx)(f,{className:(0,n.cn)(o({variant:l,size:s,className:r})),ref:t,...c})});d.displayName="Button"},2614:(e,t,r)=>{"use strict";function a(e){let t=window.location.pathname.startsWith("/app1")?"/app1":"",r=e.startsWith("/")?e:"/".concat(e);return"".concat(t).concat(r)}r.d(t,{e:()=>a})},4283:(e,t,r)=>{"use strict";r.d(t,{$_:()=>n,B8:()=>l,FF:()=>i,vP:()=>s,yJ:()=>a});let a={M1:"V1",M2:"V2"},i={HEADER:"px-4 py-2 bg-gray-100 font-medium text-sm",CONTENT:"px-4 py-2 text-sm break-all pr-2",CONTENT_NO_BREAK:"px-4 py-2 text-sm"},l={PDF_VIEWER_MIN_HEIGHT:"600px",LOADING_TIMEOUT:2500},s={UNIQUE_ID_PREFIX:"file-uid-",DEFAULT_FILE_PATH:"-"},n={CONTAINER:"bg-red-50 border-l-4 border-red-500 p-4 mb-4",TITLE:"text-lg font-medium text-red-800 mb-2",MESSAGE:"text-sm text-red-700 mb-2",SUCCESS_INDICATOR:"absolute top-2 right-2 bg-green-100 text-green-800 px-3 py-1 rounded-full flex items-center z-10 shadow-sm",OVERLAY:"absolute inset-0 bg-white bg-opacity-95 flex items-center justify-center z-10 p-5"}},4727:(e,t,r)=>{"use strict";r.d(t,{O:()=>n,cn:()=>s});var a=r(9975),i=r(2171),l=r(4283);function s(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,i.QP)((0,a.$)(t))}function n(e){return"".concat(l.vP.UNIQUE_ID_PREFIX).concat(e,"-").concat(Date.now())}},5355:(e,t,r)=>{Promise.resolve().then(r.bind(r,6650))},6468:(e,t,r)=>{"use strict";r.d(t,{A0:()=>n,BF:()=>o,Hj:()=>d,XI:()=>s,nA:()=>f,nd:()=>c});var a=r(8861),i=r(3705),l=r(4727);let s=i.forwardRef((e,t)=>{let{className:r,...i}=e;return(0,a.jsx)("div",{className:"relative w-full overflow-auto",children:(0,a.jsx)("table",{ref:t,className:(0,l.cn)("w-full caption-bottom text-sm",r),...i})})});s.displayName="Table";let n=i.forwardRef((e,t)=>{let{className:r,...i}=e;return(0,a.jsx)("thead",{ref:t,className:(0,l.cn)("[&_tr]:border-b",r),...i})});n.displayName="TableHeader";let o=i.forwardRef((e,t)=>{let{className:r,...i}=e;return(0,a.jsx)("tbody",{ref:t,className:(0,l.cn)("[&_tr:last-child]:border-0",r),...i})});o.displayName="TableBody",i.forwardRef((e,t)=>{let{className:r,...i}=e;return(0,a.jsx)("tfoot",{ref:t,className:(0,l.cn)("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",r),...i})}).displayName="TableFooter";let d=i.forwardRef((e,t)=>{let{className:r,...i}=e;return(0,a.jsx)("tr",{ref:t,className:(0,l.cn)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",r),...i})});d.displayName="TableRow";let c=i.forwardRef((e,t)=>{let{className:r,...i}=e;return(0,a.jsx)("th",{ref:t,className:(0,l.cn)("h-10 px-2 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",r),...i})});c.displayName="TableHead";let f=i.forwardRef((e,t)=>{let{className:r,...i}=e;return(0,a.jsx)("td",{ref:t,className:(0,l.cn)("p-2 align-middle [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",r),...i})});f.displayName="TableCell",i.forwardRef((e,t)=>{let{className:r,...i}=e;return(0,a.jsx)("caption",{ref:t,className:(0,l.cn)("mt-4 text-sm text-muted-foreground",r),...i})}).displayName="TableCaption"},6650:(e,t,r)=>{"use strict";r.d(t,{default:()=>M});var a=r(8861),i=r(4727);function l(e){let{children:t,className:r=""}=e;return(0,a.jsx)("div",{className:(0,i.cn)("max-w-full bg-white rounded-3xl ring-1 ring-gray-200 shadow-md py-5 flex flex-col space-y-2 px-4",r),children:t})}var s=r(1672),n=r(3705);let o=n.forwardRef((e,t)=>{let{className:r,type:l,...s}=e;return(0,a.jsx)("input",{type:l,className:(0,i.cn)("flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-base shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",r),ref:t,...s})});o.displayName="Input";let d=[{id:"4",title:"ACT Accelerator Strategic Plan & Budget",filename:"ACT_accelerator_Strategic_Plan_&_Budget.pdf",path:"/pdfs/ACT_accelerator_Strategic_Plan_&_Budget.pdf",size:"4.2 MB",type:"pdf",createdAt:new Date("2025-04-01"),isActive:!0,createdBy:"health@example.com",updatedAt:new Date("2025-04-05")},{id:"5",title:"Better Cardiac Care Aboriginal Torres Strait Islander 2021",filename:"Better_Cardiac_Care_Aboriginal_Torres_Strait_Islander_2021.pdf",path:"/pdfs/Better_Cardiac_Care_Aboriginal_Torres_Strait_Islander_2021.pdf",size:"3.7 MB",type:"pdf",createdAt:new Date("2025-02-15"),isActive:!0,createdBy:"research@example.com",updatedAt:new Date("2025-03-20")},{id:"6",title:"Child Protection Australia 2021-22",filename:"Child_Protection_Australia_2021_22.pdf",path:"/pdfs/Child_Protection_Australia_2021_22.pdf",size:"2.9 MB",type:"pdf",createdAt:new Date("2025-01-28"),isActive:!0,createdBy:"welfare@example.com",updatedAt:new Date("2025-02-10")},{id:"7",title:"OECD Health Care Quality and Outcomes Indicators",filename:"OECD_health_care_quality_and_outcomes_indicators.pdf",path:"/pdfs/OECD_health_care_quality_and_outcomes_indicators.pdf",size:"5.1 MB",type:"pdf",createdAt:new Date("2025-03-25"),isActive:!0,createdBy:"policy@example.com",updatedAt:new Date("2025-04-12")},{id:"8",title:"Oxygen Therapy Equipment Cleaning Guidelines",filename:"Oxygen_Therapy_Equipment_Cleaning_Guidelines.pdf",path:"/pdfs/Oxygen_Therapy_Equipment_Cleaning_Guidelines.pdf",size:"1.8 MB",type:"pdf",createdAt:new Date("2025-02-05"),isActive:!0,createdBy:"medical@example.com",updatedAt:new Date("2025-03-01")}];var c=r(2338),f=r(4319),u=r(6468);function p(e){var t;let{data:r,columns:i}=e,[l,s]=(0,n.useState)([]),[o,d]=(0,n.useState)([]),[p,m]=(0,n.useState)({}),[h,g]=(0,n.useState)({}),x=(0,c.N4)({data:r,columns:i,onSortingChange:s,onColumnFiltersChange:d,getCoreRowModel:(0,f.HT)(),getPaginationRowModel:(0,f.kW)(),getSortedRowModel:(0,f.h5)(),getFilteredRowModel:(0,f.hM)(),onColumnVisibilityChange:m,onRowSelectionChange:g,enableMultiRowSelection:!1,enableRowSelection:!0,state:{sorting:l,columnFilters:o,columnVisibility:p,rowSelection:h}});return(0,a.jsx)("div",{className:"w-full",children:(0,a.jsx)("div",{className:" border",children:(0,a.jsxs)(u.XI,{children:[(0,a.jsx)(u.A0,{children:x.getHeaderGroups().map(e=>(0,a.jsx)(u.Hj,{children:e.headers.map(e=>(0,a.jsx)(u.nd,{className:"px-2",children:e.isPlaceholder?null:(0,c.Kv)(e.column.columnDef.header,e.getContext())},e.id))},e.id))}),(0,a.jsx)(u.BF,{children:(null==(t=x.getRowModel().rows)?void 0:t.length)?x.getRowModel().rows.map(e=>(0,a.jsx)(u.Hj,{"data-state":e.getIsSelected()&&"selected",children:e.getVisibleCells().map(e=>(0,a.jsx)(u.nA,{children:(0,c.Kv)(e.column.columnDef.cell,e.getContext())},e.id))},e.id)):(0,a.jsx)(u.Hj,{children:(0,a.jsx)(u.nA,{colSpan:i.length,className:"h-24 text-center",children:"No results."})})})]})})})}var m=r(8667),h=r(6201),g=r(2614);let x=async e=>{let{body:t}=e;if(!(await fetch((0,g.e)("/api/pdfs"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...t})})).ok)throw Error("Failed to register file via table row");return"File registered successfully"},_=async e=>{let t=await fetch((0,g.e)("/api/register-job-batch-file"),{method:"POST",body:e});if(!t.ok)throw Error("Failed to upload file");return t},w=async e=>{let t=await fetch((0,g.e)("/api/register-job-batch-file"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok)throw Error("Failed to fetch roles");return t},b=e=>{let{className:t,variant:r="white"}=e;return(0,a.jsxs)("div",{className:(0,i.cn)("flex items-center justify-center space-x-2",t),children:[(0,a.jsx)("div",{className:"w-1.5 h-1.5 bg-".concat(r," rounded-full animate-bounce [animation-delay:-0.3s]")}),(0,a.jsx)("div",{className:"w-1.5 h-1.5 bg-".concat(r," rounded-full animate-bounce [animation-delay:-0.15s]")}),(0,a.jsx)("div",{className:"w-1.5 h-1.5 bg-".concat(r," rounded-full animate-bounce")})]})};var j=r(4283),y=r(8915),v=r(1006),N=r(3843),A=r(8919),C=r(2429),k=r(5277);let S=e=>{let{pdf:t}=e,[r,l]=(0,n.useState)(!1),[o,d]=(0,n.useState)(!1),c=(0,A.useSearchParams)(),f=c.get("project_id")||"",u=c.get("project_code")||"",p=c.get("workflow_id")||"",m=c.get("workflow_code")||"",h=c.get("task_id")||"",g=c.get("task_uid")||"",_=c.get("user_id")||"";(0,n.useEffect)(()=>{},[f,u,p,m,h,g,_]);let w={project_code:u||k.env.NEXT_PUBLIC_PROJECT_CODE||"",workflow_code:m||k.env.NEXT_PUBLIC_WORKFLOW_CODE||"",first_task_uid:g||k.env.NEXT_PUBLIC_FIRST_TASK_UID||"",file_unique_identifier:"",file_name:"",file_path:j.vP.DEFAULT_FILE_PATH,project_id:f||"",workflow_id:p||"",meta_data:{...j.yJ}},S=async()=>{d(!0);try{let e={...w,file_name:t.filename,file_unique_identifier:(0,i.O)(t.filename),file_path:t.path,meta_data:{...j.yJ}},r=[{field:"project_code",label:"Project Code"},{field:"workflow_code",label:"Workflow Code"},{field:"first_task_uid",label:"Content Acquisition Task UID"}].find(t=>{let{field:r}=t;return!e[r]||"string"==typeof e[r]&&""===e[r].trim()});if(r){C.o.error("".concat(r.label," is required. Please fill it out before proceeding.")),d(!1);return}if(!e.file_name||""===e.file_name.trim()){C.o.error("File name cannot be empty"),d(!1);return}if(!e.file_path||""===e.file_path.trim()){C.o.error("File path cannot be empty"),d(!1);return}await x({body:e}),C.o.success("PDF registered successfully")}catch(e){C.o.error("Failed to register PDF")}finally{d(!1),l(!1)}},T=(0,A.useRouter)();return(0,a.jsxs)("div",{className:"flex space-x-2 ",children:[(0,a.jsx)(s.$,{variant:"ghost",size:"icon",onClick:()=>{var e;let r=new URLSearchParams({id:t.id,title:t.title,fileName:t.filename,path:t.path,size:(null!=(e=t.size)?e:0).toString(),type:t.type,createdAt:String(t.createdAt),isActive:t.isActive?"true":"false",createdBy:String(t.createdBy),updatedAt:String(t.updatedAt)});T.push("/pdf?".concat(r.toString()))},title:"View PDF",className:"cursor-pointer",children:(0,a.jsx)(v.A,{className:"h-4 w-4"})}),(0,a.jsxs)(y.AM,{open:r,onOpenChange:l,children:[(0,a.jsx)(y.Wv,{onClick:()=>l(!r),className:"cursor-pointer hover:bg-accent hover:text-accent-foreground h-9 px-4 py-2",children:(0,a.jsx)(N.A,{className:"h-4 w-4"})}),(0,a.jsxs)(y.hl,{className:" p-4 w-fit border-2 *:border-gray-300 bg-white flex flex-col items-center gap-2 rounded-md ",children:[(0,a.jsx)("p",{children:"Do you want to register this file ?"}),(0,a.jsxs)("div",{className:"flex flex-row gap-2",children:[(0,a.jsx)(s.$,{size:"icon",className:"cursor-pointer w-fit p-4",onClick:S,title:"Register file",disabled:o,children:o?(0,a.jsx)(b,{variant:"white"}):"Yes, register it."}),(0,a.jsx)(y.iN,{asChild:!0,children:(0,a.jsx)(s.$,{size:"icon",className:"cursor-pointer w-fit p-4 bg-red-600 hover:bg-red-200 ",title:"Close popover",children:"No"})})]})]})]})]})},T=[{accessorKey:"title",header:e=>{let{column:t}=e;return(0,a.jsxs)(s.$,{variant:"ghost",onClick:()=>t.toggleSorting("asc"===t.getIsSorted()),className:"  text-black font-league font-[400] text-sm tracking-wide cursor-pointer",children:["Title",(0,a.jsx)(m.A,{className:"ml-2 h-4 w-4"})]})},cell:e=>{let{row:t}=e;return(0,a.jsxs)("div",{className:"flex flex-row items-center gap-2",children:[(0,a.jsx)(h.A,{className:"h-4 w-4 my-auto"}),(0,a.jsx)("div",{className:"font-medium",children:t.getValue("title")})]})}},{accessorKey:"filename",header:e=>{let{column:t}=e;return(0,a.jsxs)(s.$,{variant:"ghost",onClick:()=>t.toggleSorting("asc"===t.getIsSorted()),className:"  text-black font-league font-[400] text-sm tracking-wide cursor-pointer",children:["Filename",(0,a.jsx)(m.A,{className:"ml-2 h-4 w-4"})]})},cell:e=>{let{row:t}=e;return(0,a.jsx)("span",{children:t.getValue("filename")})}},{accessorKey:"type",header:e=>{let{column:t}=e;return(0,a.jsxs)(s.$,{variant:"ghost",onClick:()=>t.toggleSorting("asc"===t.getIsSorted()),className:"  text-black font-league font-[400] text-sm tracking-wide cursor-pointer",children:["Type",(0,a.jsx)(m.A,{className:"ml-2 h-4 w-4"})]})},cell:e=>{let{row:t}=e;return(0,a.jsx)("span",{children:t.getValue("type").toUpperCase()})}},{accessorKey:"createdAt",header:e=>{let{column:t}=e;return(0,a.jsxs)(s.$,{variant:"ghost",onClick:()=>t.toggleSorting("asc"===t.getIsSorted()),className:"  text-black font-league font-[400] text-sm tracking-wide cursor-pointer",children:["Date Added",(0,a.jsx)(m.A,{className:"ml-2 h-4 w-4"})]})},cell:e=>{let{row:t}=e,r=t.original.createdAt;return r?(0,a.jsx)("span",{children:r.toLocaleDateString()}):(0,a.jsx)("span",{children:"Not Available"})}},{id:"actions",header:"Actions",cell:e=>{let{row:t}=e,r=t.original;return(0,a.jsx)("div",{className:"flex space-x-2",children:(0,a.jsx)(S,{pdf:r})})}}];function E(e){let{documents:t}=e;return(0,a.jsx)("div",{children:(0,a.jsx)(p,{data:t,columns:T})})}var D=r(938);function F(e){let{delayDuration:t=0,...r}=e;return(0,a.jsx)(D.Kq,{"data-slot":"tooltip-provider",delayDuration:t,...r})}function P(e){let{...t}=e;return(0,a.jsx)(F,{children:(0,a.jsx)(D.bL,{"data-slot":"tooltip",...t})})}function I(e){let{...t}=e;return(0,a.jsx)(D.l9,{"data-slot":"tooltip-trigger",...t})}function R(e){let{className:t,sideOffset:r=0,children:l,...s}=e;return(0,a.jsx)(D.ZL,{children:(0,a.jsxs)(D.UC,{"data-slot":"tooltip-content",sideOffset:r,className:(0,i.cn)("bg-primary text-primary-foreground animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 w-fit origin-(--radix-tooltip-content-transform-origin) rounded-md px-3 py-1.5 text-xs text-balance",t),...s,children:[l,(0,a.jsx)(D.i3,{className:"bg-primary fill-primary z-50 size-2.5 translate-y-[calc(-50%_-_2px)] rotate-45 rounded-[2px]"})]})})}var O=r(4420);function B(){let e=(0,n.useMemo)(()=>j.yJ,[]),t=(0,A.useSearchParams)(),r=t.get("project_id")||"",l=t.get("project_code")||"",o=t.get("workflow_id")||"",d=t.get("workflow_code")||"",c=t.get("task_uid")||"",f=(0,n.useMemo)(()=>({project_code:l,workflow_code:d,first_task_uid:c,file_unique_identifier:"",file_name:"",file_path:j.vP.DEFAULT_FILE_PATH,project_id:r||"",workflow_id:o||"",meta_data:{...e}}),[l,d,c,r,o,e]),[u,p]=(0,n.useState)(!1),m=(0,n.useRef)(null),h=async e=>{if(!e.target.files||0===e.target.files.length)return;let t=e.target.files[0],r={...f,file_name:t.name,file_unique_identifier:(0,i.O)(t.name)};p(!0);try{let e,a;if(t){let a=new FormData;a.append("file",t),a.append("project_code",r.project_code),a.append("workflow_code",r.workflow_code),a.append("first_task_uid",r.first_task_uid),a.append("project_id",r.project_id),a.append("workflow_id",r.workflow_id),r.file_unique_identifier&&a.append("file_unique_identifier",r.file_unique_identifier),a.append("meta_data",JSON.stringify(r.meta_data||j.yJ)),e=await _(a)}else{let t={project_code:r.project_code,workflow_code:r.workflow_code,first_task_uid:r.first_task_uid,file_name:r.file_name,file_unique_identifier:r.file_unique_identifier||(0,i.O)(r.file_name),file_path:r.file_path||j.vP.DEFAULT_FILE_PATH,project_id:r.project_id||"",workflow_id:r.workflow_id||"",meta_data:r.meta_data||j.yJ};e=await w(t)}try{a=await e.json()}catch(r){let t=await e.text();throw Error("Non-JSON response received: ".concat(t.substring(0,100),"..."))}if(!e.ok)throw Error(a.error||"Failed to register job batch file (".concat(e.status,")"));a&&((null==a?void 0:a.file_output_upload_url)||(null==a?void 0:a.registration)&&(null==a?void 0:a.registration.file_output_upload_url))&&C.o.success("File successfully registered!")}catch(t){let e=t instanceof Error?t.message:"An error occurred";C.o.error("Failed to register job batch file: ".concat(e))}finally{p(!1)}};return(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("input",{id:"file_upload",ref:m,type:"file",onChange:h,className:"sr-only"}),(0,a.jsx)(F,{children:(0,a.jsxs)(P,{children:[(0,a.jsx)(I,{asChild:!0,children:(0,a.jsxs)(s.$,{variant:"ghost",className:"relative cursor-pointer shadow-md ring-1  ring-gray-200 hover:bg-gray-100 ",onClick:()=>{var e;null==(e=m.current)||e.click()},disabled:u,children:[(0,a.jsx)(O.A,{}),u?(0,a.jsxs)(a.Fragment,{children:["Registering ",(0,a.jsx)(b,{variant:"black"})]}):"Register Uploaded File"]})}),(0,a.jsx)(R,{className:"max-w-xs",children:(0,a.jsx)("p",{children:"Choose another file to upload and register (This will not upload your file in your preferred storage)"})})]})})]})}function M(){return(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)(l,{children:[(0,a.jsxs)("div",{className:"flex px-5 mb-5 justify-between items-center ",children:[(0,a.jsx)("h1",{className:"text-xl  font-normal font-league",children:"Content Acquisition"}),(0,a.jsx)("div",{className:"flex gap-2",children:(0,a.jsx)(B,{})})]}),(0,a.jsx)(E,{documents:d}),(0,a.jsxs)("div",{className:"flex px-5 pt-3 justify-between items-center ",children:[(0,a.jsxs)("p",{className:"text-normal font-light",children:["Showing ",d.length," of ",d.length," entries"]}),(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)(s.$,{variant:"ghost",className:"cursor-pointer",disabled:!0,children:"Previous"}),(0,a.jsx)(s.$,{variant:"ghost",className:"cursor-pointer",disabled:!0,children:"Next"}),(0,a.jsx)("p",{className:"pl-6  text-gray-500 text-sm",children:"Show:"}),(0,a.jsx)(o,{type:"number",defaultValue:10,className:"w-16",min:1,max:100,disabled:!0})]})]})]})})}}},e=>{var t=t=>e(e.s=t);e.O(0,[115,429,719,780,806,358],()=>t(5355)),_N_E=e.O()}]);